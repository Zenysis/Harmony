!function(e,t){return"object"==typeof exports&&"object"==typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):void t(e.acorn||(e.acorn={}))}(this,function(e){"use strict";function t(e){le=e||{};for(var t in ye)Object.prototype.hasOwnProperty.call(le,t)||(le[t]=ye[t]);de=le.sourceFile||null}function r(e,t){var r=ve(he,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=Ee,n}function n(e){function t(e){if(1==e.length)return r+="return str === "+JSON.stringify(e[0])+";";r+="switch(str){";for(var t=0;t<e.length;++t)r+="case "+JSON.stringify(e[t])+":";r+="return true}return false;"}e=e.split(" ");var r="",n=[];e:for(var o=0;o<e.length;++o){for(var i=0;i<n.length;++i)if(n[i][0].length==e[o].length){n[i].push(e[o]);continue e}n.push([e[o]])}if(n.length>3){n.sort(function(e,t){return t.length-e.length}),r+="switch(str.length){";for(var o=0;o<n.length;++o){var a=n[o];r+="case "+a[0].length+":",t(a)}r+="}"}else t(e);return new Function("str",r)}function o(){this.line=Pe,this.column=Ee-me}function i(){Pe=1,Ee=me=0,Ne=!0,c()}function a(e,t){ge=Ee,le.locations&&(Oe=new o),_e=e,c(),Ie=t,Ne=e.beforeExpr}function s(){var e=le.onComment&&le.locations&&new o,t=Ee,n=he.indexOf("*/",Ee+=2);if(-1===n&&r(Ee-2,"Unterminated comment"),Ee=n+2,le.locations){$t.lastIndex=t;for(var i;(i=$t.exec(he))&&i.index<Ee;)++Pe,me=i.index+i[0].length}le.onComment&&le.onComment(!0,he.slice(t+2,n),t,Ee,e,le.locations&&new o)}function p(){for(var e=Ee,t=le.onComment&&le.locations&&new o,r=he.charCodeAt(Ee+=2);fe>Ee&&10!==r&&13!==r&&8232!==r&&8233!==r;)++Ee,r=he.charCodeAt(Ee);le.onComment&&le.onComment(!1,he.slice(e+2,Ee),e,Ee,t,le.locations&&new o)}function c(){for(;fe>Ee;){var e=he.charCodeAt(Ee);if(32===e)++Ee;else if(13===e){++Ee;var t=he.charCodeAt(Ee);10===t&&++Ee,le.locations&&(++Pe,me=Ee)}else if(10===e||8232===e||8233===e)++Ee,le.locations&&(++Pe,me=Ee);else if(e>8&&14>e)++Ee;else if(47===e){var t=he.charCodeAt(Ee+1);if(42===t)s();else{if(47!==t)break;p()}}else if(160===e)++Ee;else{if(!(e>=5760&&Jt.test(String.fromCharCode(e))))break;++Ee}}}function u(){var e=he.charCodeAt(Ee+1);return e>=48&&57>=e?N(!0):(++Ee,a(bt))}function l(){var e=he.charCodeAt(Ee+1);return Ne?(++Ee,O()):61===e?b(Nt,2):b(_t,1)}function h(){var e=he.charCodeAt(Ee+1);return 61===e?b(Nt,2):b(Ut,1)}function f(e){var t=he.charCodeAt(Ee+1);return t===e?b(124===e?St:Tt,2):61===t?b(Nt,2):b(124===e?wt:At,1)}function d(){var e=he.charCodeAt(Ee+1);return 61===e?b(Nt,2):b(Ct,1)}function y(e){var t=he.charCodeAt(Ee+1);return t===e?45==t&&62==he.charCodeAt(Ee+2)&&Ht.test(he.slice(Te,Ee))?(Ee+=3,p(),c(),g()):b(Pt,2):61===t?b(Nt,2):b(Ft,1)}function v(e){var t=he.charCodeAt(Ee+1),r=1;return t===e?(r=62===e&&62===he.charCodeAt(Ee+2)?3:2,61===he.charCodeAt(Ee+r)?b(Nt,r+1):b(jt,r)):33==t&&60==e&&45==he.charCodeAt(Ee+2)&&45==he.charCodeAt(Ee+3)?(Ee+=4,p(),c(),g()):(61===t&&(r=61===he.charCodeAt(Ee+2)?3:2),b(kt,r))}function E(e){var t=he.charCodeAt(Ee+1);return 61===t?b(xt,61===he.charCodeAt(Ee+2)?3:2):b(61===e?It:mt,1)}function R(e){switch(e){case 46:return u();case 40:return++Ee,a(yt);case 41:return++Ee,a(vt);case 59:return++Ee,a(Rt);case 44:return++Ee,a(Et);case 91:return++Ee,a(lt);case 93:return++Ee,a(ht);case 123:return++Ee,a(ft);case 125:return++Ee,a(dt);case 58:return++Ee,a(gt);case 63:return++Ee,a(Ot);case 48:var t=he.charCodeAt(Ee+1);if(120===t||88===t)return I();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return N(!1);case 34:case 39:return P(e);case 47:return l(e);case 37:case 42:return h();case 124:case 38:return f(e);case 94:return d();case 43:case 45:return y(e);case 60:case 62:return v(e);case 61:case 33:return E(e);case 126:return b(mt,1)}return!1}function g(e){if(e?Ee=Re+1:Re=Ee,le.locations&&(be=new o),e)return O();if(Ee>=fe)return a(De);var t=he.charCodeAt(Ee);if(Kt(t)||92===t)return T();var n=R(t);if(n===!1){var i=String.fromCharCode(t);if("\\"===i||qt.test(i))return T();r(Ee,"Unexpected character '"+i+"'")}return n}function b(e,t){var r=he.slice(Ee,Ee+t);Ee+=t,a(e,r)}function O(){for(var e,t,n="",o=Ee;;){Ee>=fe&&r(o,"Unterminated regular expression");var i=he.charAt(Ee);if(Ht.test(i)&&r(o,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++Ee}var n=he.slice(o,Ee);++Ee;var s=S();return s&&!/^[gmsiy]*$/.test(s)&&r(o,"Invalid regexp flag"),a(Fe,new RegExp(n,s))}function _(e,t){for(var r=Ee,n=0,o=0,i=null==t?1/0:t;i>o;++o){var a,s=he.charCodeAt(Ee);if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&57>=s?s-48:1/0,a>=e)break;++Ee,n=n*e+a}return Ee===r||null!=t&&Ee-r!==t?null:n}function I(){Ee+=2;var e=_(16);return null==e&&r(Re+2,"Expected hexadecimal number"),Kt(he.charCodeAt(Ee))&&r(Ee,"Identifier directly after number"),a(je,e)}function N(e){var t=Ee,n=!1,o=48===he.charCodeAt(Ee);e||null!==_(10)||r(t,"Invalid number"),46===he.charCodeAt(Ee)&&(++Ee,_(10),n=!0);var i=he.charCodeAt(Ee);(69===i||101===i)&&(i=he.charCodeAt(++Ee),(43===i||45===i)&&++Ee,null===_(10)&&r(t,"Invalid number"),n=!0),Kt(he.charCodeAt(Ee))&&r(Ee,"Identifier directly after number");var s,p=he.slice(t,Ee);return n?s=parseFloat(p):o&&1!==p.length?/[89]/.test(p)||xe?r(t,"Invalid number"):s=parseInt(p,8):s=parseInt(p,10),a(je,s)}function P(e){Ee++;for(var t="";;){Ee>=fe&&r(Re,"Unterminated string constant");var n=he.charCodeAt(Ee);if(n===e)return++Ee,a(Ue,t);if(92===n){n=he.charCodeAt(++Ee);var o=/^[0-7]+/.exec(he.slice(Ee,Ee+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++Ee,o)xe&&r(Ee-2,"Octal literal in strict mode"),t+=String.fromCharCode(parseInt(o,8)),Ee+=o.length-1;else switch(n){case 110:t+="\n";break;case 114:t+="\r";break;case 120:t+=String.fromCharCode(m(2));break;case 117:t+=String.fromCharCode(m(4));break;case 85:t+=String.fromCharCode(m(8));break;case 116:t+="	";break;case 98:t+="\b";break;case 118:t+="";break;case 102:t+="\f";break;case 48:t+="\x00";break;case 13:10===he.charCodeAt(Ee)&&++Ee;case 10:le.locations&&(me=Ee,++Pe);break;default:t+=String.fromCharCode(n)}}else(13===n||10===n||8232===n||8233===n)&&r(Re,"Unterminated string constant"),t+=String.fromCharCode(n),++Ee}}function m(e){var t=_(16,e);return null===t&&r(Re,"Bad character escape sequence"),t}function S(){Dt=!1;for(var e,t=!0,n=Ee;;){var o=he.charCodeAt(Ee);if(Zt(o))Dt&&(e+=he.charAt(Ee)),++Ee;else{if(92!==o)break;Dt||(e=he.slice(n,Ee)),Dt=!0,117!=he.charCodeAt(++Ee)&&r(Ee,"Expecting Unicode escape sequence \\uXXXX"),++Ee;var i=m(4),a=String.fromCharCode(i);a||r(Ee-1,"Invalid Unicode escape"),(t?Kt(i):Zt(i))||r(Ee-4,"Invalid Unicode escape"),e+=a}t=!1}return Dt?e:he.slice(n,Ee)}function T(){var e=S(),t=Le;return Dt||(Vt(e)?t=ut[e]:(le.forbidReserved&&(3===le.ecmaVersion?Bt:Yt)(e)||xe&&Mt(e))&&r(Re,"The keyword '"+e+"' is reserved")),a(t,e)}function w(){Se=Re,Te=ge,we=Oe,g()}function C(e){if(xe=e,Ee=Te,le.locations)for(;me>Ee;)me=he.lastIndexOf("\n",me-2)+1,--Pe;c(),g()}function A(){this.type=null,this.start=Re,this.end=null}function x(){this.start=be,this.end=null,null!==de&&(this.source=de)}function k(){var e=new A;return le.locations&&(e.loc=new x),le.directSourceFile&&(e.sourceFile=le.directSourceFile),le.ranges&&(e.range=[Re,0]),e}function j(e){var t=new A;return t.start=e.start,le.locations&&(t.loc=new x,t.loc.start=e.loc.start),le.ranges&&(t.range=[e.range[0],0]),t}function F(e,t){return e.type=t,e.end=Te,le.locations&&(e.loc.end=we),le.ranges&&(e.range[1]=Te),e}function U(e){return le.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function L(e){return _e===e?(w(),!0):void 0}function D(){return!le.strictSemicolons&&(_e===De||_e===dt||Ht.test(he.slice(Te,Re)))}function B(){L(Rt)||D()||M()}function Y(e){_e===e?w():M()}function M(){r(Re,"Unexpected token")}function G(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&r(e.start,"Assigning to rvalue"),xe&&"Identifier"===e.type&&Gt(e.name)&&r(e.start,"Assigning to "+e.name+" in strict mode")}function V(e){Se=Te=Ee,le.locations&&(we=new o),Ce=xe=null,Ae=[],g();var t=e||k(),r=!0;for(e||(t.body=[]);_e!==De;){var n=J();t.body.push(n),r&&U(n)&&C(!0),r=!1}return F(t,"Program")}function J(){(_e===_t||_e===Nt&&"/="==Ie)&&g(!0);var e=_e,t=k();switch(e){case Be:case Ge:w();var n=e===Be;L(Rt)||D()?t.label=null:_e!==Le?M():(t.label=ue(),B());for(var o=0;o<Ae.length;++o){var i=Ae[o];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return o===Ae.length&&r(t.start,"Unsyntactic "+e.keyword),F(t,n?"BreakStatement":"ContinueStatement");case Ve:return w(),B(),F(t,"DebuggerStatement");case Xe:return w(),Ae.push(Qt),t.body=J(),Ae.pop(),Y(rt),t.test=X(),B(),F(t,"DoWhileStatement");case ze:if(w(),Ae.push(Qt),Y(yt),_e===Rt)return q(t,null);if(_e===tt){var a=k();return w(),H(a,!0),F(a,"VariableDeclaration"),1===a.declarations.length&&L(ct)?z(t,a):q(t,a)}var a=$(!1,!0);return L(ct)?(G(a),z(t,a)):q(t,a);case He:return w(),pe(t,!0);case $e:return w(),t.test=X(),t.consequent=J(),t.alternate=L(We)?J():null,F(t,"IfStatement");case Ke:return Ce||r(Re,"'return' outside of function"),w(),L(Rt)||D()?t.argument=null:(t.argument=$(),B()),F(t,"ReturnStatement");case Ze:w(),t.discriminant=X(),t.cases=[],Y(ft),Ae.push(er);for(var s,p;_e!=dt;)if(_e===Ye||_e===Je){var c=_e===Ye;s&&F(s,"SwitchCase"),t.cases.push(s=k()),s.consequent=[],w(),c?s.test=$():(p&&r(Se,"Multiple default clauses"),p=!0,s.test=null),Y(gt)}else s||M(),s.consequent.push(J());return s&&F(s,"SwitchCase"),w(),Ae.pop(),F(t,"SwitchStatement");case Qe:return w(),Ht.test(he.slice(Te,Re))&&r(Te,"Illegal newline after throw"),t.argument=$(),B(),F(t,"ThrowStatement");case et:if(w(),t.block=W(),t.handler=null,_e===Me){var u=k();w(),Y(yt),u.param=ue(),xe&&Gt(u.param.name)&&r(u.param.start,"Binding "+u.param.name+" in strict mode"),Y(vt),u.guard=null,u.body=W(),t.handler=F(u,"CatchClause")}return t.guardedHandlers=ke,t.finalizer=L(qe)?W():null,t.handler||t.finalizer||r(t.start,"Missing catch or finally clause"),F(t,"TryStatement");case tt:return w(),H(t),B(),F(t,"VariableDeclaration");case rt:return w(),t.test=X(),Ae.push(Qt),t.body=J(),Ae.pop(),F(t,"WhileStatement");case nt:return xe&&r(Re,"'with' in strict mode"),w(),t.object=X(),t.body=J(),F(t,"WithStatement");case ft:return W();case Rt:return w(),F(t,"EmptyStatement");default:var l=Ie,h=$();if(e===Le&&"Identifier"===h.type&&L(gt)){for(var o=0;o<Ae.length;++o)Ae[o].name===l&&r(h.start,"Label '"+l+"' is already declared");var f=_e.isLoop?"loop":_e===Ze?"switch":null;return Ae.push({name:l,kind:f}),t.body=J(),Ae.pop(),t.label=h,F(t,"LabeledStatement")}return t.expression=h,B(),F(t,"ExpressionStatement")}}function X(){Y(yt);var e=$();return Y(vt),e}function W(e){var t,r=k(),n=!0,o=!1;for(r.body=[],Y(ft);!L(dt);){var i=J();r.body.push(i),n&&e&&U(i)&&(t=o,C(o=!0)),n=!1}return o&&!t&&C(!1),F(r,"BlockStatement")}function q(e,t){return e.init=t,Y(Rt),e.test=_e===Rt?null:$(),Y(Rt),e.update=_e===vt?null:$(),Y(vt),e.body=J(),Ae.pop(),F(e,"ForStatement")}function z(e,t){return e.left=t,e.right=$(),Y(vt),e.body=J(),Ae.pop(),F(e,"ForInStatement")}function H(e,t){for(e.declarations=[],e.kind="var";;){var n=k();if(n.id=ue(),xe&&Gt(n.id.name)&&r(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=L(It)?$(!0,t):null,e.declarations.push(F(n,"VariableDeclarator")),!L(Et))break}return e}function $(e,t){var r=K(t);if(!e&&_e===Et){var n=j(r);for(n.expressions=[r];L(Et);)n.expressions.push(K(t));return F(n,"SequenceExpression")}return r}function K(e){var t=Z(e);if(_e.isAssign){var r=j(t);return r.operator=Ie,r.left=t,w(),r.right=K(e),G(t),F(r,"AssignmentExpression")}return t}function Z(e){var t=Q(e);if(L(Ot)){var r=j(t);return r.test=t,r.consequent=$(!0),Y(gt),r.alternate=$(!0,e),F(r,"ConditionalExpression")}return t}function Q(e){return ee(te(),-1,e)}function ee(e,t,r){var n=_e.binop;if(null!=n&&(!r||_e!==ct)&&n>t){var o=j(e);o.left=e,o.operator=Ie;var i=_e;w(),o.right=ee(te(),n,r);var a=F(o,i===St||i===Tt?"LogicalExpression":"BinaryExpression");return ee(a,t,r)}return e}function te(){if(_e.prefix){var e=k(),t=_e.isUpdate;return e.operator=Ie,e.prefix=!0,Ne=!0,w(),e.argument=te(),t?G(e.argument):xe&&"delete"===e.operator&&"Identifier"===e.argument.type&&r(e.start,"Deleting local variable in strict mode"),F(e,t?"UpdateExpression":"UnaryExpression")}for(var n=re();_e.postfix&&!D();){var e=j(n);e.operator=Ie,e.prefix=!1,e.argument=n,G(n),w(),n=F(e,"UpdateExpression")}return n}function re(){return ne(oe())}function ne(e,t){if(L(bt)){var r=j(e);return r.object=e,r.property=ue(!0),r.computed=!1,ne(F(r,"MemberExpression"),t)}if(L(lt)){var r=j(e);return r.object=e,r.property=$(),r.computed=!0,Y(ht),ne(F(r,"MemberExpression"),t)}if(!t&&L(yt)){var r=j(e);return r.callee=e,r.arguments=ce(vt,!1),ne(F(r,"CallExpression"),t)}return e}function oe(){switch(_e){case it:var e=k();return w(),F(e,"ThisExpression");case Le:return ue();case je:case Ue:case Fe:var e=k();return e.value=Ie,e.raw=he.slice(Re,ge),w(),F(e,"Literal");case at:case st:case pt:var e=k();return e.value=_e.atomValue,e.raw=_e.keyword,w(),F(e,"Literal");case yt:var t=be,r=Re;w();var n=$();return n.start=r,n.end=ge,le.locations&&(n.loc.start=t,n.loc.end=Oe),le.ranges&&(n.range=[r,ge]),Y(vt),n;case lt:var e=k();return w(),e.elements=ce(ht,!0,!0),F(e,"ArrayExpression");case ft:return ae();case He:var e=k();return w(),pe(e,!1);case ot:return ie();default:M()}}function ie(){var e=k();return w(),e.callee=ne(oe(),!0),L(yt)?e.arguments=ce(vt,!1):e.arguments=ke,F(e,"NewExpression")}function ae(){var e=k(),t=!0,n=!1;for(e.properties=[],w();!L(dt);){if(t)t=!1;else if(Y(Et),le.allowTrailingCommas&&L(dt))break;var o,i={key:se()},a=!1;if(L(gt)?(i.value=$(!0),o=i.kind="init"):le.ecmaVersion>=5&&"Identifier"===i.key.type&&("get"===i.key.name||"set"===i.key.name)?(a=n=!0,o=i.kind=i.key.name,i.key=se(),_e!==yt&&M(),i.value=pe(k(),!1)):M(),"Identifier"===i.key.type&&(xe||n))for(var s=0;s<e.properties.length;++s){var p=e.properties[s];if(p.key.name===i.key.name){var c=o==p.kind||a&&"init"===p.kind||"init"===o&&("get"===p.kind||"set"===p.kind);c&&!xe&&"init"===o&&"init"===p.kind&&(c=!1),c&&r(i.key.start,"Redefinition of property")}}e.properties.push(i)}return F(e,"ObjectExpression")}function se(){return _e===je||_e===Ue?oe():ue(!0)}function pe(e,t){_e===Le?e.id=ue():t?M():e.id=null,e.params=[];var n=!0;for(Y(yt);!L(vt);)n?n=!1:Y(Et),e.params.push(ue());var o=Ce,i=Ae;if(Ce=!0,Ae=[],e.body=W(!0),Ce=o,Ae=i,xe||e.body.body.length&&U(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var s=0>a?e.id:e.params[a];if((Mt(s.name)||Gt(s.name))&&r(s.start,"Defining '"+s.name+"' in strict mode"),a>=0)for(var p=0;a>p;++p)s.name===e.params[p].name&&r(s.start,"Argument name clash in strict mode")}return F(e,t?"FunctionDeclaration":"FunctionExpression")}function ce(e,t,r){for(var n=[],o=!0;!L(e);){if(o)o=!1;else if(Y(Et),t&&le.allowTrailingCommas&&L(e))break;r&&_e===Et?n.push(null):n.push($(!0))}return n}function ue(e){var t=k();return t.name=_e===Le?Ie:e&&!le.forbidReserved&&_e.keyword||M(),Ne=!1,w(),F(t,"Identifier")}e.version="0.4.1";var le,he,fe,de;e.parse=function(e,r){return he=String(e),fe=he.length,t(r),i(),V(le.program)};var ye=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},ve=e.getLineInfo=function(e,t){for(var r=1,n=0;;){$t.lastIndex=n;var o=$t.exec(e);if(!(o&&o.index<t))break;++r,n=o.index+o[0].length}return{line:r,column:t-n}};e.tokenize=function(e,r){function n(e){return g(e),o.start=Re,o.end=ge,o.startLoc=be,o.endLoc=Oe,o.type=_e,o.value=Ie,o}he=String(e),fe=he.length,t(r),i();var o={};return n.jumpTo=function(e,t){if(Ee=e,le.locations){Pe=1,me=$t.lastIndex=0;for(var r;(r=$t.exec(he))&&r.index<e;)++Pe,me=r.index+r[0].length}Ne=t,c()},n};var Ee,Re,ge,be,Oe,_e,Ie,Ne,Pe,me,Se,Te,we,Ce,Ae,xe,ke=[],je={type:"num"},Fe={type:"regexp"},Ue={type:"string"},Le={type:"name"},De={type:"eof"},Be={keyword:"break"},Ye={keyword:"case",beforeExpr:!0},Me={keyword:"catch"},Ge={keyword:"continue"},Ve={keyword:"debugger"},Je={keyword:"default"},Xe={keyword:"do",isLoop:!0},We={keyword:"else",beforeExpr:!0},qe={keyword:"finally"},ze={keyword:"for",isLoop:!0},He={keyword:"function"},$e={keyword:"if"},Ke={keyword:"return",beforeExpr:!0},Ze={keyword:"switch"},Qe={keyword:"throw",beforeExpr:!0},et={keyword:"try"},tt={keyword:"var"},rt={keyword:"while",isLoop:!0},nt={keyword:"with"},ot={keyword:"new",beforeExpr:!0},it={keyword:"this"},at={keyword:"null",atomValue:null},st={keyword:"true",atomValue:!0},pt={keyword:"false",atomValue:!1},ct={keyword:"in",binop:7,beforeExpr:!0},ut={"break":Be,"case":Ye,"catch":Me,"continue":Ge,"debugger":Ve,"default":Je,"do":Xe,"else":We,"finally":qe,"for":ze,"function":He,"if":$e,"return":Ke,"switch":Ze,"throw":Qe,"try":et,"var":tt,"while":rt,"with":nt,"null":at,"true":st,"false":pt,"new":ot,"in":ct,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":it,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},lt={type:"[",beforeExpr:!0},ht={type:"]"},ft={type:"{",beforeExpr:!0},dt={type:"}"},yt={type:"(",beforeExpr:!0},vt={type:")"},Et={type:",",beforeExpr:!0},Rt={type:";",beforeExpr:!0},gt={type:":",beforeExpr:!0},bt={type:"."},Ot={type:"?",beforeExpr:!0},_t={binop:10,beforeExpr:!0},It={isAssign:!0,beforeExpr:!0},Nt={isAssign:!0,beforeExpr:!0},Pt={postfix:!0,prefix:!0,isUpdate:!0},mt={prefix:!0,beforeExpr:!0},St={binop:1,beforeExpr:!0},Tt={binop:2,beforeExpr:!0},wt={binop:3,beforeExpr:!0},Ct={binop:4,beforeExpr:!0},At={binop:5,beforeExpr:!0},xt={binop:6,beforeExpr:!0},kt={binop:7,beforeExpr:!0},jt={binop:8,beforeExpr:!0},Ft={binop:9,prefix:!0,beforeExpr:!0},Ut={binop:10,beforeExpr:!0};e.tokTypes={bracketL:lt,bracketR:ht,braceL:ft,braceR:dt,parenL:yt,parenR:vt,comma:Et,semi:Rt,colon:gt,dot:bt,question:Ot,slash:_t,eq:It,name:Le,eof:De,num:je,regexp:Fe,string:Ue};for(var Lt in ut)e.tokTypes["_"+Lt]=ut[Lt];var Dt,Bt=n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Yt=n("class enum extends super const export import"),Mt=n("implements interface let package private protected public static yield"),Gt=n("eval arguments"),Vt=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Jt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Xt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Wt="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",qt=new RegExp("["+Xt+"]"),zt=new RegExp("["+Xt+Wt+"]"),Ht=/[\n\r\u2028\u2029]/,$t=/\r\n|[\n\r\u2028\u2029]/g,Kt=e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&qt.test(String.fromCharCode(e))},Zt=e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&zt.test(String.fromCharCode(e))},Qt={kind:"loop"},er={kind:"switch"}});var Interpreter=function(e,t){"string"==typeof e&&(e=acorn.parse(e,Interpreter.PARSE_OPTIONS)),this.ast=e,this.initFunc_=t,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var r,n=/^step([A-Z]\w*)$/;for(var o in this)"function"==typeof this[o]&&(r=o.match(n))&&(this.stepFunctions_[r[1]]=this[o].bind(this));this.global=this.createScope(this.ast,null),this.ast=acorn.parse(this.polyfills_.join("\n"),Interpreter.PARSE_OPTIONS),this.polyfills_=void 0,this.stripLocations_(this.ast,void 0,void 0);var i=new Interpreter.State(this.ast,this.global);i.done=!1,this.stateStack=[i],this.run(),this.value=void 0,this.ast=e;var i=new Interpreter.State(this.ast,this.global);i.done=!1,this.stateStack.length=0,this.stateStack[0]=i,this.nodeConstructor=i.node.constructor,this.stateStack=this.stateStack,this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.UNDEFINED=void 0,this.NULL=null,this.NAN=NaN,this.TRUE=!0,this.FALSE=!1,this.STRING_EMPTY="",this.NUMBER_ZERO=0,this.NUMBER_ONE=1};Interpreter.PARSE_OPTIONS={ecmaVersion:5},Interpreter.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},Interpreter.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},Interpreter.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},Interpreter.STEP_ERROR={},Interpreter.SCOPE_REFERENCE={},Interpreter.VALUE_IN_DESCRIPTOR={},Interpreter.toStringCycles_=[],Interpreter.prototype.appendCode=function(e){var t=this.stateStack[0];if(!t||"Program"!==t.node.type)throw Error("Expecting original AST to start with a Program node.");if("string"==typeof e&&(e=acorn.parse(e,Interpreter.PARSE_OPTIONS)),!e||"Program"!==e.type)throw Error("Expecting new AST to start with a Program node.");this.populateScope_(e,t.scope);for(var r,n=0;r=e.body[n];n++)t.node.body.push(r);t.done=!1},Interpreter.prototype.step=function(){var e=this.stateStack,t=e[e.length-1];if(!t)return!1;var r=t.node,n=r.type;if("Program"===n&&t.done)return!1;if(this.paused_)return!0;try{var o=this.stepFunctions_[n](e,t,r)}catch(i){if(i!==Interpreter.STEP_ERROR)throw i}return o&&e.push(o),r.end?!0:this.step()},Interpreter.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},Interpreter.prototype.initGlobalScope=function(e){this.setProperty(e,"NaN",NaN,Interpreter.READONLY_DESCRIPTOR),this.setProperty(e,"Infinity",1/0,Interpreter.READONLY_DESCRIPTOR),this.setProperty(e,"undefined",void 0,Interpreter.READONLY_DESCRIPTOR),this.setProperty(e,"window",e,Interpreter.READONLY_DESCRIPTOR),this.setProperty(e,"this",e,Interpreter.READONLY_DESCRIPTOR),this.setProperty(e,"self",e),this.OBJECT_PROTO=new Interpreter.Object(null),this.FUNCTION_PROTO=new Interpreter.Object(this.OBJECT_PROTO),this.initFunction(e),this.initObject(e),e.proto=this.OBJECT_PROTO,this.setProperty(e,"constructor",this.OBJECT),this.initArray(e),this.initString(e),this.initBoolean(e),this.initNumber(e),this.initDate(e),this.initRegExp(e),this.initError(e),this.initMath(e),this.initJSON(e);var t=this,r=this.createNativeFunction(function(e){throw EvalError("Can't happen")},!1);r.eval=!0,this.setProperty(e,"eval",r),this.setProperty(e,"parseInt",this.createNativeFunction(parseInt,!1)),this.setProperty(e,"parseFloat",this.createNativeFunction(parseFloat,!1)),this.setProperty(e,"isNaN",this.createNativeFunction(isNaN,!1)),this.setProperty(e,"isFinite",this.createNativeFunction(isFinite,!1));for(var n=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],o=0;o<n.length;o++){var i=function(e){return function(r){try{return e(r)}catch(n){t.throwException(t.URI_ERROR,n.message)}}}(n[o][0]);this.setProperty(e,n[o][1],this.createNativeFunction(i,!1),Interpreter.NONENUMERABLE_DESCRIPTOR)}this.initFunc_&&this.initFunc_(this,e)},Interpreter.prototype.initFunction=function(e){var t,r=this,n=/^[A-Za-z_$][\w$]*$/;t=function(e){if(r.calledWithNew())var t=this;else var t=r.createObjectProto(r.FUNCTION_PROTO);if(arguments.length)var o=String(arguments[arguments.length-1]);else var o="";var i=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(i){for(var a=i.split(/\s*,\s*/),s=0;s<a.length;s++){var p=a[s];n.test(p)||r.throwException(r.SYNTAX_ERROR,"Invalid function argument: "+p)}i=a.join(", ")}t.parentScope=r.global;try{var c=acorn.parse("(function("+i+") {"+o+"})",Interpreter.PARSE_OPTIONS)}catch(u){r.throwException(r.SYNTAX_ERROR,"Invalid code: "+u.message)}return 1!==c.body.length&&r.throwException(r.SYNTAX_ERROR,"Invalid code in function body."),t.node=c.body[0].expression,r.setProperty(t,"length",t.node.length,Interpreter.READONLY_DESCRIPTOR),t},t.id=this.functionCounter_++,this.FUNCTION=this.createObjectProto(this.FUNCTION_PROTO),this.setProperty(e,"Function",this.FUNCTION),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO),this.FUNCTION.nativeFunc=t,this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,Interpreter.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.setProperty(this.FUNCTION_PROTO,"length",0,Interpreter.READONLY_DESCRIPTOR);var o=function(e){if(!(e&&e.isObject||r.getScope().strict))if(void 0===e||null===e)e=r.global;else{var t=r.createObjectProto(r.getPrototype(e));t.data=e,e=t}return e};t=function(e,t){var n=r.stateStack[r.stateStack.length-1];n.func_=this,n.funcThis_=o(e),n.arguments_=[],null!==t&&void 0!==t&&(t.isObject?n.arguments_=r.arrayPseudoToNative(t):r.throwException(r.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),n.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",t),t=function(e){var t=r.stateStack[r.stateStack.length-1];t.func_=this,t.funcThis_=o(e),t.arguments_=[];for(var n=1;n<arguments.length;n++)t.arguments_.push(arguments[n]);t.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",t),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),t=function(){return this.toString()},this.setNativeFunctionPrototype(this.FUNCTION,"toString",t),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",t),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR)},Interpreter.prototype.initObject=function(e){var t,r=this;t=function(e){if(void 0===e||null===e)return r.calledWithNew()?this:r.createObjectProto(r.OBJECT_PROTO);if(!e.isObject){var t=r.createObjectProto(r.getPrototype(e));return t.data=e,t}return e},this.OBJECT=this.createNativeFunction(t,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT),this.setProperty(e,"Object",this.OBJECT);var n=function(e){(void 0===e||null===e)&&r.throwException(r.TYPE_ERROR,"Cannot convert '"+e+"' to object")};t=function(e){n(e);var t=e.isObject?e.properties:e;return r.arrayNativeToPseudo(Object.getOwnPropertyNames(t))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(e){return n(e),e.isObject&&(e=e.properties),r.arrayNativeToPseudo(Object.keys(e))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(e){return null===e?r.createObjectProto(null):(void 0!==e&&e.isObject||r.throwException(r.TYPE_ERROR,"Object prototype may only be an Object or null"),r.createObjectProto(e))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),t=function(e,t,n){return t=String(t),e&&e.isObject||r.throwException(r.TYPE_ERROR,"Object.defineProperty called on non-object"),n&&n.isObject||r.throwException(r.TYPE_ERROR,"Property description must be an object"),!e.properties[t]&&e.preventExtensions&&r.throwException(r.TYPE_ERROR,"Can't define property '"+t+"', object is not extensible"),r.setProperty(e,t,Interpreter.VALUE_IN_DESCRIPTOR,n.properties),e},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),t=function(e,t){if(e&&e.isObject||r.throwException(r.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object"),t=String(t),!(t in e.properties))return void 0;var n=Object.getOwnPropertyDescriptor(e.properties,t),o=e.getter[t],i=e.setter[t];(o||i)&&(n.get=o,n.set=i,delete n.value,delete n.writable);var a=r.nativeToPseudo(n);return"value"in n&&r.setProperty(a,"value",n.value),a},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(e){return n(e),r.getPrototype(e)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(e){return Boolean(e)&&!e.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(e){return e&&e.isObject&&(e.preventExtensions=!0),e},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",Interpreter.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",Interpreter.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",Interpreter.Object.prototype.valueOf),
t=function(e){return n(this),this.isObject?String(e)in this.properties:this.hasOwnProperty(e)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",t),t=function(e){return n(this),Object.prototype.propertyIsEnumerable.call(this.properties,e)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",t),t=function(e){for(;;){if(e=r.getPrototype(e),!e)return!1;if(e===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",t)},Interpreter.prototype.initArray=function(e){var t,r=this;t=function(e){if(r.calledWithNew())var t=this;else var t=r.createObjectProto(r.ARRAY_PROTO);var n=arguments[0];if(1===arguments.length&&"number"==typeof n)isNaN(Interpreter.legalArrayLength(n))&&r.throwException(r.RANGE_ERROR,"Invalid array length"),t.properties.length=n;else{for(var o=0;o<arguments.length;o++)t.properties[o]=arguments[o];t.properties.length=o}return t},this.ARRAY=this.createNativeFunction(t,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(e,"Array",this.ARRAY),t=function(e){return e&&"Array"===e["class"]},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(t,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),t=function(){return Array.prototype.pop.call(this.properties)},this.setNativeFunctionPrototype(this.ARRAY,"pop",t),t=function(e){return Array.prototype.push.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"push",t),t=function(){return Array.prototype.shift.call(this.properties)},this.setNativeFunctionPrototype(this.ARRAY,"shift",t),t=function(e){return Array.prototype.unshift.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"unshift",t),t=function(){return Array.prototype.reverse.call(this.properties),this},this.setNativeFunctionPrototype(this.ARRAY,"reverse",t),t=function(e,t){var n=Array.prototype.splice.apply(this.properties,arguments);return r.arrayNativeToPseudo(n)},this.setNativeFunctionPrototype(this.ARRAY,"splice",t),t=function(e,t){var n=Array.prototype.slice.call(this.properties,e,t);return r.arrayNativeToPseudo(n)},this.setNativeFunctionPrototype(this.ARRAY,"slice",t),t=function(e){return Array.prototype.join.call(this.properties,e)},this.setNativeFunctionPrototype(this.ARRAY,"join",t),t=function(e){for(var t=[],n=0,o=r.getProperty(this,"length"),i=0;o>i;i++){if(r.hasProperty(this,i)){var a=r.getProperty(this,i);t[n]=a}n++}for(var i=0;i<arguments.length;i++){var s=arguments[i];if(r.isa(s,r.ARRAY))for(var p=r.getProperty(s,"length"),c=0;p>c;c++)r.hasProperty(s,c)&&(t[n]=r.getProperty(s,c)),n++;else t[n]=s}return r.arrayNativeToPseudo(t)},this.setNativeFunctionPrototype(this.ARRAY,"concat",t),t=function(e,t){return Array.prototype.indexOf.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"indexOf",t),t=function(e,t){return Array.prototype.lastIndexOf.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"lastIndexOf",t),t=function(){return Array.prototype.sort.call(this.properties),this},this.setNativeFunctionPrototype(this.ARRAY,"sort",t),this.polyfills_.push("Object.defineProperty(Array.prototype, 'every',","{configurable: true, writable: true, value:","function(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O && !callbackfn.call(T, O[k], k, O)) return false;","k++;","}","return true;","}","});","Object.defineProperty(Array.prototype, 'filter',","{configurable: true, writable: true, value:","function(fun/*, thisArg*/) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var t = Object(this);","var len = t.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t) {","var val = t[i];","if (fun.call(thisArg, val, i, t)) res.push(val);","}","}","return res;","}","});","Object.defineProperty(Array.prototype, 'forEach',","{configurable: true, writable: true, value:","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O) callback.call(T, O[k], k, O);","k++;","}","}","});","Object.defineProperty(Array.prototype, 'map',","{configurable: true, writable: true, value:","function(callback, thisArg) {","if (!this || typeof callback !== 'function') new TypeError;","var T, A, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","A = new Array(len);","k = 0;","while (k < len) {","if (k in O) A[k] = callback.call(T, O[k], k, O);","k++;","}","return A;","}","});","Object.defineProperty(Array.prototype, 'reduce',","{configurable: true, writable: true, value:","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var t = Object(this), len = t.length >>> 0, k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in t)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = t[k++];","}","for (; k < len; k++) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'reduceRight',","{configurable: true, writable: true, value:","function(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var t = Object(this), len = t.length >>> 0, k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in t)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = t[k--];","}","for (; k >= 0; k--) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'some',","{configurable: true, writable: true, value:","function(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var t = Object(this);","var len = t.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t && fun.call(thisArg, t[i], i, t)) {","return true;","}","}","return false;","}","});","(function() {","var sort_ = Array.prototype.sort;","Array.prototype.sort = function(opt_comp) {","if (typeof opt_comp !== 'function') {","return sort_.call(this);","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp(this[j], this[j + 1]) > 0) {","var swap = this[j];","this[j] = this[j + 1];","this[j + 1] = swap;","changes++;","}","}","if (!changes) break;","}","return this;","};","})();","Object.defineProperty(Array.prototype, 'toLocaleString',","{configurable: true, writable: true, value:","function() {","var out = [];","for (var i = 0; i < this.length; i++) {","out[i] = (this[i] === null || this[i] === undefined) ? '' : this[i].toLocaleString();","}","return out.join(',');","}","});","")},Interpreter.prototype.initString=function(e){var t,r=this;t=function(e){return e=String(e),r.calledWithNew()?(this.data=e,this):e},this.STRING=this.createNativeFunction(t,!0),this.setProperty(e,"String",this.STRING),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);for(var n=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],o=0;o<n.length;o++)this.setNativeFunctionPrototype(this.STRING,n[o],String.prototype[n[o]]);t=function(e,t,n){return t=t?r.pseudoToNative(t):void 0,n=n?r.pseudoToNative(n):void 0,String(this).localeCompare(e,t,n)},this.setNativeFunctionPrototype(this.STRING,"localeCompare",t),t=function(e,t){r.isa(e,r.REGEXP)&&(e=e.data);var n=String(this).split(e,t);return r.arrayNativeToPseudo(n)},this.setNativeFunctionPrototype(this.STRING,"split",t),t=function(e){r.isa(e,r.REGEXP)&&(e=e.data);var t=String(this).match(e);return t&&r.arrayNativeToPseudo(t)},this.setNativeFunctionPrototype(this.STRING,"match",t),t=function(e){return r.isa(e,r.REGEXP)&&(e=e.data),String(this).search(e)},this.setNativeFunctionPrototype(this.STRING,"search",t),t=function(e,t){return r.isa(e,r.REGEXP)&&(e=e.data),String(this).replace(e,t)},this.setNativeFunctionPrototype(this.STRING,"replace",t),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},Interpreter.prototype.initBoolean=function(e){var t,r=this;t=function(e){return e=Boolean(e),r.calledWithNew()?(this.data=e,this):e},this.BOOLEAN=this.createNativeFunction(t,!0),this.setProperty(e,"Boolean",this.BOOLEAN)},Interpreter.prototype.initNumber=function(e){var t,r=this;t=function(e){return e=Number(e),r.calledWithNew()?(this.data=e,this):e},this.NUMBER=this.createNativeFunction(t,!0),this.setProperty(e,"Number",this.NUMBER);for(var n=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],o=0;o<n.length;o++)this.setProperty(this.NUMBER,n[o],Number[n[o]],Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);t=function(e){try{return Number(this).toExponential(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",t),t=function(e){try{return Number(this).toFixed(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",t),t=function(e){try{return Number(this).toPrecision(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",t),t=function(e){try{return Number(this).toString(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",t),t=function(e,t){return e=e?r.pseudoToNative(e):void 0,t=t?r.pseudoToNative(t):void 0,Number(this).toLocaleString(e,t)},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",t)},Interpreter.prototype.initDate=function(e){var t,r=this;t=function(e,t){if(!r.calledWithNew())return Date();var n=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(Date,n)),this},this.DATE=this.createNativeFunction(t,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(e,"Date",this.DATE),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),Interpreter.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),Interpreter.NONENUMERABLE_DESCRIPTOR);for(var n=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],o=0;o<n.length;o++)t=function(e){return function(t){for(var n=[],o=0;o<arguments.length;o++)n[o]=r.pseudoToNative(arguments[o]);return this.data[e].apply(this.data,n)}}(n[o]),this.setNativeFunctionPrototype(this.DATE,n[o],t)},Interpreter.prototype.initRegExp=function(e){var t,r=this;t=function(e,t){if(r.calledWithNew())var n=this;else var n=r.createObjectProto(r.REGEXP_PROTO);return e=e?e.toString():"",t=t?t.toString():"",r.populateRegExp(n,new RegExp(e,t)),n},this.REGEXP=this.createNativeFunction(t,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(e,"RegExp",this.REGEXP),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),t=function(e){return this.data.test(e)},this.setNativeFunctionPrototype(this.REGEXP,"test",t),t=function(e){e=e.toString(),this.data.lastIndex=Number(r.getProperty(this,"lastIndex"));var t=this.data.exec(e);if(r.setProperty(this,"lastIndex",this.data.lastIndex),t){for(var n=r.createObjectProto(r.ARRAY_PROTO),o=0;o<t.length;o++)r.setProperty(n,o,t[o]);return r.setProperty(n,"index",t.index),r.setProperty(n,"input",t.input),n}return null},this.setNativeFunctionPrototype(this.REGEXP,"exec",t)},Interpreter.prototype.initError=function(e){var t=this;this.ERROR=this.createNativeFunction(function(e){if(t.calledWithNew())var r=this;else var r=t.createObject(t.ERROR);return e&&t.setProperty(r,"message",String(e),Interpreter.NONENUMERABLE_DESCRIPTOR),r},!0),this.setProperty(e,"Error",this.ERROR),this.setProperty(this.ERROR.properties.prototype,"message","",Interpreter.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",Interpreter.NONENUMERABLE_DESCRIPTOR);var r=function(r){var n=t.createNativeFunction(function(e){if(t.calledWithNew())var r=this;else var r=t.createObject(n);return e&&t.setProperty(r,"message",String(e),Interpreter.NONENUMERABLE_DESCRIPTOR),r},!0);return t.setProperty(n,"prototype",t.createObject(t.ERROR)),t.setProperty(n.properties.prototype,"name",r,Interpreter.NONENUMERABLE_DESCRIPTOR),t.setProperty(e,r,n),n};this.EVAL_ERROR=r("EvalError"),this.RANGE_ERROR=r("RangeError"),this.REFERENCE_ERROR=r("ReferenceError"),this.SYNTAX_ERROR=r("SyntaxError"),this.TYPE_ERROR=r("TypeError"),this.URI_ERROR=r("URIError")},Interpreter.prototype.initMath=function(e){var t=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"Math",t);for(var r=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],n=0;n<r.length;n++)this.setProperty(t,r[n],Math[r[n]],Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR);for(var o=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],n=0;n<o.length;n++)this.setProperty(t,o[n],this.createNativeFunction(Math[o[n]],!1),Interpreter.NONENUMERABLE_DESCRIPTOR)},Interpreter.prototype.initJSON=function(e){var t=this,r=t.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"JSON",r);var n=function(e){try{var r=JSON.parse(e.toString())}catch(n){t.throwException(t.SYNTAX_ERROR,n.message)}return t.nativeToPseudo(r)};this.setProperty(r,"parse",this.createNativeFunction(n,!1)),n=function(e){var r=t.pseudoToNative(e);try{var n=JSON.stringify(r)}catch(o){t.throwException(t.TYPE_ERROR,o.message)}return n},this.setProperty(r,"stringify",this.createNativeFunction(n,!1))},Interpreter.prototype.isa=function(e,t){if(null===e||void 0===e||!t)return!1;var r=t.properties.prototype;if(e===r)return!0;for(e=this.getPrototype(e);e;){if(e===r)return!0;e=e.proto}return!1},Interpreter.legalArrayLength=function(e){var t=e>>>0;return t===Number(e)?t:NaN},Interpreter.legalArrayIndex=function(e){var t=e>>>0;return String(t)===String(e)&&4294967295!==t?t:NaN},Interpreter.Value,Interpreter.Object=function(e){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=e},Interpreter.Object.prototype.proto=null,Interpreter.Object.prototype.isObject=!0,Interpreter.Object.prototype["class"]="Object",Interpreter.Object.prototype.data=null,Interpreter.Object.prototype.toString=function(){if("Array"===this["class"]){var e=Interpreter.toStringCycles_;e.push(this);try{for(var t=[],r=0;r<this.properties.length;r++){var n=this.properties[r];t[r]=n&&n.isObject&&-1!==e.indexOf(n)?"...":n}}finally{e.pop()}return t.join(",")}if("Error"===this["class"]){var e=Interpreter.toStringCycles_;if(-1!==e.indexOf(this))return"[object Error]";var o,i,a=this;do if("name"in a.properties){o=a.properties.name;break}while(a=a.proto);var a=this;do if("message"in a.properties){i=a.properties.message;break}while(a=a.proto);e.push(this);try{o=o&&o.toString(),i=i&&i.toString()}finally{e.pop()}return i?o+": "+i:String(o)}return null!==this.data?String(this.data):"[object "+this["class"]+"]"},Interpreter.Object.prototype.valueOf=function(){return void 0===this.data||null===this.data||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data},Interpreter.prototype.createObject=function(e){return this.createObjectProto(e&&e.properties.prototype)},Interpreter.prototype.createObjectProto=function(e){var t=new Interpreter.Object(e);return this.isa(t,this.FUNCTION)&&(this.setProperty(t,"prototype",this.createObjectProto(this.OBJECT_PROTO||null)),t["class"]="Function"),this.isa(t,this.ARRAY)&&(this.setProperty(t,"length",0,{configurable:!1,enumerable:!1,writable:!0}),t["class"]="Array"),this.isa(t,this.ERROR)&&(t["class"]="Error"),t},Interpreter.prototype.populateRegExp=function(e,t){e.data=t,this.setProperty(e,"lastIndex",t.lastIndex,Interpreter.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"source",t.source,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"global",t.global,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"ignoreCase",t.ignoreCase,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"multiline",t.multiline,Interpreter.READONLY_NONENUMERABLE_DESCRIPTOR)},Interpreter.prototype.createFunction=function(e,t){var r=this.createObjectProto(this.FUNCTION_PROTO);return r.parentScope=t,r.node=e,this.setProperty(r,"length",r.node.params.length,Interpreter.READONLY_DESCRIPTOR),r},Interpreter.prototype.createNativeFunction=function(e,t){var r=this.createObjectProto(this.FUNCTION_PROTO);return r.nativeFunc=e,e.id=this.functionCounter_++,this.setProperty(r,"length",e.length,Interpreter.READONLY_DESCRIPTOR),t?this.setProperty(r.properties.prototype,"constructor",r,Interpreter.NONENUMERABLE_DESCRIPTOR):t===!1&&(r.illegalConstructor=!0,this.setProperty(r,"prototype",void 0)),r},Interpreter.prototype.createAsyncFunction=function(e){var t=this.createObjectProto(this.FUNCTION_PROTO);return t.asyncFunc=e,e.id=this.functionCounter_++,this.setProperty(t,"length",e.length,Interpreter.READONLY_DESCRIPTOR),t},Interpreter.prototype.nativeToPseudo=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)return e;if(e instanceof RegExp){var t=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(t,e),t}if(e instanceof Date){var r=this.createObjectProto(this.DATE_PROTO);return r.data=e,r}if(e instanceof Function){var n=this,o=function(){return n.nativeToPseudo(e.apply(n,Array.prototype.slice.call(arguments).map(function(e){return n.pseudoToNative(e)})))};return this.createNativeFunction(o,void 0)}var i;if(Array.isArray(e)){i=this.createObjectProto(this.ARRAY_PROTO);for(var a=0;a<e.length;a++)a in e&&this.setProperty(i,a,this.nativeToPseudo(e[a]))}else{i=this.createObjectProto(this.OBJECT_PROTO);for(var s in e)this.setProperty(i,s,this.nativeToPseudo(e[s]))}return i},Interpreter.prototype.pseudoToNative=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)return e;if(this.isa(e,this.REGEXP))return e.data;if(this.isa(e,this.DATE))return e.data;var r=t||{pseudo:[],"native":[]},n=r.pseudo.indexOf(e);if(-1!==n)return r["native"][n];r.pseudo.push(e);var o;if(this.isa(e,this.ARRAY)){o=[],r["native"].push(o);for(var i=this.getProperty(e,"length"),n=0;i>n;n++)this.hasProperty(e,n)&&(o[n]=this.pseudoToNative(this.getProperty(e,n),r))}else{o={},r["native"].push(o);var a;for(var s in e.properties)a=e.properties[s],o[s]=this.pseudoToNative(a,r)}return r.pseudo.pop(),r["native"].pop(),o},Interpreter.prototype.arrayNativeToPseudo=function(e){for(var t=this.createObjectProto(this.ARRAY_PROTO),r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++)this.setProperty(t,r[n],e[r[n]]);return t},Interpreter.prototype.arrayPseudoToNative=function(e){var t=[];for(var r in e.properties)t[r]=this.getProperty(e,r);return t.length=Interpreter.legalArrayLength(this.getProperty(e,"length"))||0,t},Interpreter.prototype.getPrototype=function(e){switch(typeof e){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return e?e.proto:null},Interpreter.prototype.getProperty=function(e,t){if(t=String(t),(void 0===e||null===e)&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+t+"' of "+e),"length"===t){if(this.isa(e,this.STRING))return String(e).length}else if(t.charCodeAt(0)<64&&this.isa(e,this.STRING)){var r=Interpreter.legalArrayIndex(t);if(!isNaN(r)&&r<String(e).length)return String(e)[r]}do if(e.properties&&t in e.properties){var n=e.getter[t];return n?(n.isGetter=!0,n):e.properties[t]}while(e=this.getPrototype(e));return void 0},Interpreter.prototype.hasProperty=function(e,t){if(!e.isObject)throw TypeError("Primitive data type has no properties");if(t=String(t),"length"===t&&this.isa(e,this.STRING))return!0;if(this.isa(e,this.STRING)){var r=Interpreter.legalArrayIndex(t);if(!isNaN(r)&&r<String(e).length)return!0}do if(e.properties&&t in e.properties)return!0;while(e=this.getPrototype(e));return!1},Interpreter.prototype.setProperty=function(e,t,r,n){t=String(t),(void 0===e||null===e)&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+t+"' of "+e),n&&("get"in n||"set"in n)&&("value"in n||"writable"in n)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var o=!this.stateStack||this.getScope().strict;if(!e.isObject)return void(o&&this.throwException(this.TYPE_ERROR,"Can't create property '"+t+"' on '"+e+"'"));if(this.isa(e,this.STRING)){var i=Interpreter.legalArrayIndex(t);if("length"===t||!isNaN(i)&&i<String(e).length)return void(o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+t+"' of String '"+e.data+"'"))}if("Array"===e["class"]){var a,s=e.properties.length;if("length"===t){var r=Interpreter.legalArrayLength(r);if(isNaN(r)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),s>r)for(a in e.properties)a=Interpreter.legalArrayIndex(a),!isNaN(a)&&a>=r&&delete e.properties[a]}else isNaN(a=Interpreter.legalArrayIndex(t))||(e.properties.length=Math.max(s,a+1))}if(e.preventExtensions&&!(t in e.properties))return void(o&&this.throwException(this.TYPE_ERROR,"Can't add property '"+t+"', object is not extensible"));if(n){"get"in n&&(n.get?e.getter[t]=n.get:delete e.getter[t]),"set"in n&&(n.set?e.setter[t]=n.set:delete e.setter[t]);var p={};"configurable"in n&&(p.configurable=n.configurable),"enumerable"in n&&(p.enumerable=n.enumerable),"writable"in n&&(p.writable=n.writable,delete e.getter[t],delete e.setter[t]),"value"in n?(p.value=n.value,delete e.getter[t],delete e.setter[t]):r!==Interpreter.VALUE_IN_DESCRIPTOR&&(p.value=r,delete e.getter[t],delete e.setter[t]);try{Object.defineProperty(e.properties,t,p)}catch(c){this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+t)}}else{if(r===Interpreter.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified.");for(var u=e;!(t in u.properties);)if(u=this.getPrototype(u),!u){u=e;break}if(u.setter&&u.setter[t])return u.setter[t];if(u.getter&&u.getter[t])o&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+t+"' of object '"+e+"' which only has a getter");else try{e.properties[t]=r}catch(c){o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+t+"' of object '"+e+"'")}}},Interpreter.prototype.setNativeFunctionPrototype=function(e,t,r){this.setProperty(e.properties.prototype,t,this.createNativeFunction(r,!1),Interpreter.NONENUMERABLE_DESCRIPTOR)},Interpreter.prototype.getScope=function(){var e=this.stateStack[this.stateStack.length-1].scope;if(!e)throw Error("No scope found.");return e},Interpreter.prototype.createScope=function(e,t){var r=this.createObjectProto(null);if(r.parentScope=t,t||this.initGlobalScope(r),this.populateScope_(e,r),r.strict=!1,t&&t.strict)r.strict=!0;else{var n=e.body&&e.body[0];n&&n.expression&&"Literal"===n.expression.type&&"use strict"===n.expression.value&&(r.strict=!0)}return r},Interpreter.prototype.createSpecialScope=function(e,t){if(!e)throw Error("parentScope required");var r=t||this.createObjectProto(null);return r.parentScope=e,r.strict=e.strict,r},Interpreter.prototype.getValueFromScope=function(e){for(var t=this.getScope();t&&t!==this.global;){if(e in t.properties)return t.properties[e];t=t.parentScope}if(t===this.global&&this.hasProperty(t,e))return this.getProperty(t,e);var r=this.stateStack[this.stateStack.length-1].node;return"UnaryExpression"===r.type&&"typeof"===r.operator?void 0:void this.throwException(this.REFERENCE_ERROR,e+" is not defined")},Interpreter.prototype.setValueToScope=function(e,t){for(var r=this.getScope(),n=r.strict;r&&r!==this.global;){if(e in r.properties)return void(r.properties[e]=t);r=r.parentScope}return r!==this.global||n&&!this.hasProperty(r,e)?void this.throwException(this.REFERENCE_ERROR,e+" is not defined"):this.setProperty(r,e,t)},Interpreter.prototype.populateScope_=function(e,t){if("VariableDeclaration"===e.type)for(var r=0;r<e.declarations.length;r++)this.setProperty(t,e.declarations[r].id.name,void 0,Interpreter.VARIABLE_DESCRIPTOR);else{if("FunctionDeclaration"===e.type)return void this.setProperty(t,e.id.name,this.createFunction(e,t),Interpreter.VARIABLE_DESCRIPTOR);if("FunctionExpression"===e.type)return;if("ExpressionStatement"===e.type)return}var n=e.constructor;for(var o in e){var i=e[o];if(i&&"object"==typeof i)if(Array.isArray(i))for(var r=0;r<i.length;r++)i[r]&&i[r].constructor===n&&this.populateScope_(i[r],t);else i.constructor===n&&this.populateScope_(i,t)}},Interpreter.prototype.stripLocations_=function(e,t,r){t?e.start=t:delete e.start,r?e.end=r:delete e.end;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];o&&"object"==typeof o&&this.stripLocations_(o,t,r)}},Interpreter.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},Interpreter.prototype.getValue=function(e){return e[0]===Interpreter.SCOPE_REFERENCE?this.getValueFromScope(e[1]):this.getProperty(e[0],e[1])},Interpreter.prototype.setValue=function(e,t){return e[0]===Interpreter.SCOPE_REFERENCE?this.setValueToScope(e[1],t):this.setProperty(e[0],e[1],t)},Interpreter.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},Interpreter.prototype.throwException=function(e,t){if(void 0===t)var r=e;else{var r=this.createObject(e);this.setProperty(r,"message",t,Interpreter.NONENUMERABLE_DESCRIPTOR)}throw this.unwind(Interpreter.Completion.THROW,r,void 0),Interpreter.STEP_ERROR},Interpreter.prototype.unwind=function(e,t,r){if(e===Interpreter.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");for(var n=this.stateStack;n.length>0;n.pop()){var o=n[n.length-1];switch(o.node.type){case"TryStatement":return void(o.cv={type:e,value:t,label:r});case"CallExpression":case"NewExpression":if(e===Interpreter.Completion.RETURN)return void(o.value=t);if(e!==Interpreter.Completion.THROW)throw Error("Unsynatctic break/continue not rejected by Acorn")}if(e===Interpreter.Completion.BREAK){if(r?o.labels&&-1!==o.labels.indexOf(r):o.isLoop||o.isSwitch)return void n.pop()}else if(e===Interpreter.Completion.CONTINUE&&(r?o.labels&&-1!==o.labels.indexOf(r):o.isLoop))return}var i;if(this.isa(t,this.ERROR)){var a={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},s=this.getProperty(t,"name").toString(),p=this.getProperty(t,"message").valueOf(),e=a[s]||Error;i=e(p)}else i=String(t);throw i},Interpreter.prototype.createGetter_=function(e,t){var r=Array.isArray(t)?t[0]:t,n=new this.nodeConstructor;n.type="CallExpression";var o=new Interpreter.State(n,this.stateStack[this.stateStack.length-1].scope);return o.doneCallee_=!0,o.funcThis_=r,o.func_=e,o.doneArgs_=!0,o.arguments_=[],o},Interpreter.prototype.createSetter_=function(e,t,r){var n=Array.isArray(t)?t[0]:this.global,o=new this.nodeConstructor;o.type="CallExpression";var i=new Interpreter.State(o,this.stateStack[this.stateStack.length-1].scope);return i.doneCallee_=!0,i.funcThis_=n,i.func_=e,i.doneArgs_=!0,i.arguments_=[r],i},Interpreter.State=function(e,t){this.node=e,this.scope=t},Interpreter.prototype.stepArrayExpression=function(e,t,r){var n=r.elements,o=t.n_||0;for(t.array_?(this.setProperty(t.array_,o,t.value),o++):(t.array_=this.createObjectProto(this.ARRAY_PROTO),t.array_.properties.length=n.length);o<n.length;){if(n[o])return t.n_=o,new Interpreter.State(n[o],t.scope);o++}e.pop(),e[e.length-1].value=t.array_},Interpreter.prototype.stepAssignmentExpression=function(e,t,r){if(!t.doneLeft_){t.doneLeft_=!0;var n=new Interpreter.State(r.left,t.scope);return n.components=!0,n}if(!t.doneRight_){if(t.leftReference_||(t.leftReference_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_&&"="!==r.operator){var o=this.getValue(t.leftReference_);if(t.leftValue_=o,o&&"object"==typeof o&&o.isGetter){o.isGetter=!1,t.doneGetter_=!0;var i=o;return this.createGetter_(i,t.leftReference_)}}return t.doneRight_=!0,new Interpreter.State(r.right,t.scope)}if(t.doneSetter_)return e.pop(),void(e[e.length-1].value=t.doneSetter_);var a=t.leftValue_,s=t.value;switch(r.operator){case"=":a=s;break;case"+=":a+=s;break;case"-=":a-=s;break;case"*=":a*=s;break;case"/=":a/=s;break;case"%=":a%=s;break;case"<<=":a<<=s;break;case">>=":a>>=s;break;case">>>=":a>>>=s;break;case"&=":a&=s;break;case"^=":a^=s;break;case"|=":a|=s;break;default:throw SyntaxError("Unknown assignment expression: "+r.operator)}var p=this.setValue(t.leftReference_,a);return p?(t.doneSetter_=a,this.createSetter_(p,t.leftReference_,a)):(e.pop(),void(e[e.length-1].value=a))},Interpreter.prototype.stepBinaryExpression=function(e,t,r){if(!t.doneLeft_)return t.doneLeft_=!0,new Interpreter.State(r.left,t.scope);if(!t.doneRight_)return t.doneRight_=!0,t.leftValue_=t.value,new Interpreter.State(r.right,t.scope);e.pop();var n,o=t.leftValue_,i=t.value;switch(r.operator){case"==":n=o==i;break;case"!=":n=o!=i;break;case"===":n=o===i;break;case"!==":n=o!==i;break;case">":n=o>i;break;case">=":n=o>=i;break;case"<":n=i>o;break;case"<=":n=i>=o;break;case"+":n=o+i;break;case"-":n=o-i;break;case"*":n=o*i;break;case"/":n=o/i;break;case"%":n=o%i;break;case"&":n=o&i;break;case"|":n=o|i;break;case"^":n=o^i;break;case"<<":n=o<<i;break;case">>":n=o>>i;break;case">>>":n=o>>>i;break;case"in":i&&i.isObject||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+i+"'"),n=this.hasProperty(i,o);break;case"instanceof":this.isa(i,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"Right-hand side of instanceof is not an object"),n=o.isObject?this.isa(o,i):!1;
break;default:throw SyntaxError("Unknown binary operator: "+r.operator)}e[e.length-1].value=n},Interpreter.prototype.stepBlockStatement=function(e,t,r){var n=t.n_||0,o=r.body[n];return o?(t.n_=n+1,new Interpreter.State(o,t.scope)):void e.pop()},Interpreter.prototype.stepBreakStatement=function(e,t,r){var n=r.label&&r.label.name;this.unwind(Interpreter.Completion.BREAK,void 0,n)},Interpreter.prototype.stepCallExpression=function(e,t,r){if(!t.doneCallee_){t.doneCallee_=1;var n=new Interpreter.State(r.callee,t.scope);return n.components=!0,n}if(1===t.doneCallee_){t.doneCallee_=2;var o=t.value;if(Array.isArray(o)){if(t.func_=this.getValue(o),o[0]===Interpreter.SCOPE_REFERENCE?t.directEval_="eval"===o[1]:t.funcThis_=o[0],o=t.func_,o&&"object"==typeof o&&o.isGetter)return o.isGetter=!1,t.doneCallee_=1,this.createGetter_(o,t.value)}else t.func_=o;t.arguments_=[],t.n_=0}var o=t.func_;if(!t.doneArgs_){if(0!==t.n_&&t.arguments_.push(t.value),r.arguments[t.n_])return new Interpreter.State(r.arguments[t.n_++],t.scope);"NewExpression"===r.type?(o.illegalConstructor&&this.throwException(this.TYPE_ERROR,o+" is not a constructor"),t.funcThis_=this.createObject(o),t.isConstructor=!0):void 0===t.funcThis_&&(t.funcThis_=t.scope.strict?void 0:this.global),t.doneArgs_=!0}if(t.doneExec_)e.pop(),t.isConstructor&&"object"!=typeof t.value?e[e.length-1].value=t.funcThis_:e[e.length-1].value=t.value;else{t.doneExec_=!0,o&&o.isObject||this.throwException(this.TYPE_ERROR,o+" is not a function");var i=o.node;if(i){for(var a=this.createScope(i.body,o.parentScope),s=0;s<i.params.length;s++){var p=i.params[s].name,c=t.arguments_.length>s?t.arguments_[s]:void 0;this.setProperty(a,p,c)}for(var u=this.createObjectProto(this.ARRAY_PROTO),s=0;s<t.arguments_.length;s++)this.setProperty(u,s,t.arguments_[s]);this.setProperty(a,"arguments",u);var l=i.id&&i.id.name;return l&&this.setProperty(a,l,o),this.setProperty(a,"this",t.funcThis_,Interpreter.READONLY_DESCRIPTOR),t.value=void 0,new Interpreter.State(i.body,a)}if(o.eval){var h=t.arguments_[0];if("string"==typeof h){try{var f=acorn.parse(h.toString(),Interpreter.PARSE_OPTIONS)}catch(d){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+d.message)}var y=new this.nodeConstructor;y.type="EvalProgram_",y.body=f.body,this.stripLocations_(y,r.start,r.end);var a=t.directEval_?t.scope:this.global;return a.strict?a=this.createScope(f,a):this.populateScope_(f,a),this.value=void 0,new Interpreter.State(y,a)}t.value=h}else if(o.nativeFunc)t.value=o.nativeFunc.apply(t.funcThis_,t.arguments_);else{if(o.asyncFunc){var v=this,E=function(e){t.value=e,v.paused_=!1},R=t.arguments_.concat(E);return this.paused_=!0,void o.asyncFunc.apply(t.funcThis_,R)}this.throwException(this.TYPE_ERROR,o["class"]+" is not a function")}}},Interpreter.prototype.stepCatchClause=function(e,t,r){if(!t.done_){t.done_=!0;var n=this.createSpecialScope(t.scope);return this.setProperty(n,r.param.name,t.throwValue),new Interpreter.State(r.body,n)}e.pop()},Interpreter.prototype.stepConditionalExpression=function(e,t,r){var n=t.mode_||0;if(0===n)return t.mode_=1,new Interpreter.State(r.test,t.scope);if(1===n){t.mode_=2;var o=Boolean(t.value);if(o&&r.consequent)return new Interpreter.State(r.consequent,t.scope);if(!o&&r.alternate)return new Interpreter.State(r.alternate,t.scope);this.value=void 0}e.pop(),"ConditionalExpression"===r.type&&(e[e.length-1].value=t.value)},Interpreter.prototype.stepContinueStatement=function(e,t,r){var n=r.label&&r.label.name;this.unwind(Interpreter.Completion.CONTINUE,void 0,n)},Interpreter.prototype.stepDebuggerStatement=function(e,t,r){e.pop()},Interpreter.prototype.stepDoWhileStatement=function(e,t,r){if("DoWhileStatement"===r.type&&void 0===t.test_&&(t.value=!0,t.test_=!0),!t.test_)return t.test_=!0,new Interpreter.State(r.test,t.scope);if(t.value){if(r.body)return t.test_=!1,t.isLoop=!0,new Interpreter.State(r.body,t.scope)}else e.pop()},Interpreter.prototype.stepEmptyStatement=function(e,t,r){e.pop()},Interpreter.prototype.stepEvalProgram_=function(e,t,r){var n=t.n_||0,o=r.body[n];return o?(t.n_=n+1,new Interpreter.State(o,t.scope)):(e.pop(),void(e[e.length-1].value=this.value))},Interpreter.prototype.stepExpressionStatement=function(e,t,r){return t.done_?(e.pop(),void(this.value=t.value)):(t.done_=!0,new Interpreter.State(r.expression,t.scope))},Interpreter.prototype.stepForInStatement=function(e,t,r){if(!t.doneInit_&&(t.doneInit_=!0,r.left.declarations&&r.left.declarations[0].init))return t.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer."),new Interpreter.State(r.left,t.scope);if(!t.doneObject_)return t.doneObject_=!0,t.variable_||(t.variable_=t.value),new Interpreter.State(r.right,t.scope);if(t.isLoop||(t.isLoop=!0,t.object_=t.value,t.visited_=Object.create(null)),void 0===t.name_){e:do{if(t.object_&&t.object_.isObject){t.props_||(t.props_=Object.getOwnPropertyNames(t.object_.properties));do var n=t.props_.shift();while(n&&(t.visited_[n]||!Object.prototype.hasOwnProperty.call(t.object_.properties,n)));if(n&&(t.visited_[n]=!0,Object.prototype.propertyIsEnumerable.call(t.object_.properties,n))){t.name_=n;break e}}else if(null!==t.object_){t.props_||(t.props_=Object.getOwnPropertyNames(t.object_));do var n=t.props_.shift();while(n&&t.visited_[n]);if(n){t.visited_[n]=!0,t.name_=n;break e}}t.object_=this.getPrototype(t.object_),t.props_=null}while(null!==t.object_);if(null===t.object_)return void e.pop()}if(!t.doneVariable_){t.doneVariable_=!0;var o=r.left;if("VariableDeclaration"!==o.type){t.variable_=null;var i=new Interpreter.State(o,t.scope);return i.components=!0,i}t.variable_=[Interpreter.SCOPE_REFERENCE,o.declarations[0].id.name]}if(t.variable_||(t.variable_=t.value),!t.doneSetter_){t.doneSetter_=!0;var a=t.name_,s=this.setValue(t.variable_,a);if(s)return this.createSetter_(s,t.variable_,a)}return t.name_=void 0,t.doneVariable_=!1,t.doneSetter_=!1,r.body?new Interpreter.State(r.body,t.scope):void 0},Interpreter.prototype.stepForStatement=function(e,t,r){var n=t.mode_||0;if(0===n){if(t.mode_=1,r.init)return new Interpreter.State(r.init,t.scope)}else if(1===n){if(t.mode_=2,r.test)return new Interpreter.State(r.test,t.scope)}else if(2===n){if(t.mode_=3,!r.test||t.value)return t.isLoop=!0,new Interpreter.State(r.body,t.scope);e.pop()}else if(3===n&&(t.mode_=1,r.update))return new Interpreter.State(r.update,t.scope)},Interpreter.prototype.stepFunctionDeclaration=function(e,t,r){e.pop()},Interpreter.prototype.stepFunctionExpression=function(e,t,r){e.pop(),e[e.length-1].value=this.createFunction(r,t.scope)},Interpreter.prototype.stepIdentifier=function(e,t,r){if(e.pop(),t.components)return void(e[e.length-1].value=[Interpreter.SCOPE_REFERENCE,r.name]);var n=this.getValueFromScope(r.name);if(n&&"object"==typeof n&&n.isGetter){n.isGetter=!1;for(var o=t.scope;!this.hasProperty(o,r.name);)o=o.parentScope;var i=n;return this.createGetter_(i,this.global)}e[e.length-1].value=n},Interpreter.prototype.stepIfStatement=Interpreter.prototype.stepConditionalExpression,Interpreter.prototype.stepLabeledStatement=function(e,t,r){e.pop();var n=t.labels||[];n.push(r.label.name);var o=new Interpreter.State(r.body,t.scope);return o.labels=n,o},Interpreter.prototype.stepLiteral=function(e,t,r){e.pop();var n=r.value;if(n instanceof RegExp){var o=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(o,n),n=o}e[e.length-1].value=n},Interpreter.prototype.stepLogicalExpression=function(e,t,r){if("&&"!==r.operator&&"||"!==r.operator)throw SyntaxError("Unknown logical operator: "+r.operator);if(!t.doneLeft_)return t.doneLeft_=!0,new Interpreter.State(r.left,t.scope);if(t.doneRight_)e.pop(),e[e.length-1].value=t.value;else{if(!("&&"===r.operator&&!t.value||"||"===r.operator&&t.value))return t.doneRight_=!0,new Interpreter.State(r.right,t.scope);e.pop(),e[e.length-1].value=t.value}},Interpreter.prototype.stepMemberExpression=function(e,t,r){if(!t.doneObject_)return t.doneObject_=!0,new Interpreter.State(r.object,t.scope);var n;if(r.computed){if(!t.doneProperty_)return t.object_=t.value,t.doneProperty_=!0,new Interpreter.State(r.property,t.scope);n=t.value}else t.object_=t.value,n=r.property.name;if(e.pop(),t.components)e[e.length-1].value=[t.object_,n];else{var o=this.getProperty(t.object_,n);if(o&&"object"==typeof o&&o.isGetter){o.isGetter=!1;var i=o;return this.createGetter_(i,t.object_)}e[e.length-1].value=o}},Interpreter.prototype.stepNewExpression=Interpreter.prototype.stepCallExpression,Interpreter.prototype.stepObjectExpression=function(e,t,r){var n=t.n_||0,o=r.properties[n];if(t.object_){var i=o.key;if("Identifier"===i.type)var a=i.name;else{if("Literal"!==i.type)throw SyntaxError("Unknown object structure: "+i.type);var a=i.value}t.properties_[a]||(t.properties_[a]={}),t.properties_[a][o.kind]=t.value,t.n_=++n,o=r.properties[n]}else t.object_=this.createObjectProto(this.OBJECT_PROTO),t.properties_=Object.create(null);if(o)return new Interpreter.State(o.value,t.scope);for(var i in t.properties_){var s=t.properties_[i];if("get"in s||"set"in s){var p={configurable:!0,enumerable:!0,get:s.get,set:s.set};this.setProperty(t.object_,i,null,p)}else this.setProperty(t.object_,i,s.init)}e.pop(),e[e.length-1].value=t.object_},Interpreter.prototype.stepProgram=function(e,t,r){var n=t.n_||0,o=r.body[n];return o?(t.done=!1,t.n_=n+1,new Interpreter.State(o,t.scope)):void(t.done=!0)},Interpreter.prototype.stepReturnStatement=function(e,t,r){return r.argument&&!t.done_?(t.done_=!0,new Interpreter.State(r.argument,t.scope)):void this.unwind(Interpreter.Completion.RETURN,t.value,void 0)},Interpreter.prototype.stepSequenceExpression=function(e,t,r){var n=t.n_||0,o=r.expressions[n];return o?(t.n_=n+1,new Interpreter.State(o,t.scope)):(e.pop(),void(e[e.length-1].value=t.value))},Interpreter.prototype.stepSwitchStatement=function(e,t,r){if(!t.test_)return t.test_=1,new Interpreter.State(r.discriminant,t.scope);for(1===t.test_&&(t.test_=2,t.switchValue_=t.value);;){var n=t.index_||0,o=r.cases[n];if(t.matched_||!o||o.test)if(o||t.matched_||!t.defaultCase_){if(!o)return void e.pop();if(!t.matched_&&!t.tested_&&o.test)return t.tested_=!0,new Interpreter.State(o.test,t.scope);if(t.matched_||t.value===t.switchValue_){t.matched_=!0;var i=t.n_||0;if(o.consequent[i])return t.isSwitch=!0,t.n_=i+1,new Interpreter.State(o.consequent[i],t.scope)}t.tested_=!1,t.n_=0,t.index_=n+1}else t.matched_=!0,t.index_=t.defaultCase_;else t.defaultCase_=n,t.index_=n+1}},Interpreter.prototype.stepThisExpression=function(e,t,r){e.pop(),e[e.length-1].value=this.getValueFromScope("this")},Interpreter.prototype.stepThrowStatement=function(e,t,r){return t.done_?void this.throwException(t.value):(t.done_=!0,new Interpreter.State(r.argument,t.scope))},Interpreter.prototype.stepTryStatement=function(e,t,r){if(!t.doneBlock_)return t.doneBlock_=!0,new Interpreter.State(r.block,t.scope);if(t.cv&&t.cv.type===Interpreter.Completion.THROW&&!t.doneHandler_&&r.handler){t.doneHandler_=!0;var n=new Interpreter.State(r.handler,t.scope);return n.throwValue=t.cv.value,t.cv=void 0,n}return!t.doneFinalizer_&&r.finalizer?(t.doneFinalizer_=!0,new Interpreter.State(r.finalizer,t.scope)):(e.pop(),void(t.cv&&this.unwind(t.cv.type,t.cv.value,t.cv.label)))},Interpreter.prototype.stepUnaryExpression=function(e,t,r){if(!t.done_){t.done_=!0;var n=new Interpreter.State(r.argument,t.scope);return n.components="delete"===r.operator,n}e.pop();var o=t.value;if("-"===r.operator)o=-o;else if("+"===r.operator)o=+o;else if("!"===r.operator)o=!o;else if("~"===r.operator)o=~o;else if("delete"===r.operator){var i=!0;if(Array.isArray(o)){var a=o[0];a===Interpreter.SCOPE_REFERENCE&&(a=t.scope);var s=String(o[1]);try{delete a.properties[s]}catch(p){t.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+s+"' of '"+a+"'"):i=!1}}o=i}else if("typeof"===r.operator)o=o&&"Function"===o["class"]?"function":typeof o;else{if("void"!==r.operator)throw SyntaxError("Unknown unary operator: "+r.operator);o=void 0}e[e.length-1].value=o},Interpreter.prototype.stepUpdateExpression=function(e,t,r){if(!t.doneLeft_){t.doneLeft_=!0;var n=new Interpreter.State(r.argument,t.scope);return n.components=!0,n}if(t.leftSide_||(t.leftSide_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_){var o=this.getValue(t.leftSide_);if(t.leftValue_=o,o&&"object"==typeof o&&o.isGetter){o.isGetter=!1,t.doneGetter_=!0;var i=o;return this.createGetter_(i,t.leftSide_)}}if(t.doneSetter_)return e.pop(),void(e[e.length-1].value=t.doneSetter_);var a,o=Number(t.leftValue_);if("++"===r.operator)a=o+1;else{if("--"!==r.operator)throw SyntaxError("Unknown update expression: "+r.operator);a=o-1}var s=r.prefix?a:o,p=this.setValue(t.leftSide_,a);return p?(t.doneSetter_=s,this.createSetter_(p,t.leftSide_,a)):(e.pop(),void(e[e.length-1].value=s))},Interpreter.prototype.stepVariableDeclaration=function(e,t,r){var n=r.declarations,o=t.n_||0,i=n[o];for(t.init_&&i&&(this.setValueToScope(i.id.name,t.value),t.init_=!1,i=n[++o]);i;){if(i.init)return t.n_=o,t.init_=!0,new Interpreter.State(i.init,t.scope);i=n[++o]}e.pop()},Interpreter.prototype.stepWithStatement=function(e,t,r){if(!t.doneObject_)return t.doneObject_=!0,new Interpreter.State(r.object,t.scope);if(!t.doneBody_){t.doneBody_=!0;var n=this.createSpecialScope(t.scope,t.value);return new Interpreter.State(r.body,n)}e.pop()},Interpreter.prototype.stepWhileStatement=Interpreter.prototype.stepDoWhileStatement,this.Interpreter=Interpreter,Interpreter.prototype.step=Interpreter.prototype.step,Interpreter.prototype.run=Interpreter.prototype.run,Interpreter.prototype.appendCode=Interpreter.prototype.appendCode,Interpreter.prototype.createObject=Interpreter.prototype.createObject,Interpreter.prototype.createObjectProto=Interpreter.prototype.createObjectProto,Interpreter.prototype.createAsyncFunction=Interpreter.prototype.createAsyncFunction,Interpreter.prototype.createNativeFunction=Interpreter.prototype.createNativeFunction,Interpreter.prototype.getProperty=Interpreter.prototype.getProperty,Interpreter.prototype.setProperty=Interpreter.prototype.setProperty,Interpreter.prototype.nativeToPseudo=Interpreter.prototype.nativeToPseudo,Interpreter.prototype.pseudoToNative=Interpreter.prototype.pseudoToNative,Interpreter.prototype.createPrimitive=function(e){return e};
